<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>게시글 조회</title>

<!-- 부트스트랩 -->
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- 글꼴1 -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link
    href="https://fonts.googleapis.com/css2?family=Foldit:wght@900&family=Gowun+Dodum&family=Montagu+Slab:wght@100;300;500;700&display=swap"
    rel="stylesheet">
<!-- 글꼴2 -->    
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Black+And+White+Picture&family=Black+Han+Sans&family=Foldit:wght@900&family=Gowun+Dodum&family=Montagu+Slab:wght@100;300;500;700&display=swap" rel="stylesheet">

<!-- 외부CSS -->
<link rel="stylesheet" th:href="@{/style/main.css}">

<!-- 외부JS -->
<script th:src="@{/script/jquery-3.7.0.min.js}"></script>
<script>
	$(function(){
		init();
		$("#insertReply").on('click', insertReply); // 다음주에 하기!!
	})
	// 댓글 전체 조회
	function init(){
		$.ajax({
			url : 'replyAll'
			, method :'GET'
			, data : {"boardseq" : $("#boardseq").val()}
			, success : output
		});
	}
	// 댓글 출력
	function output(){
		
	}
</script>
<script defer th:src="@{/script/myscript.js}"></script>
</head>


<body>
	<div class="logo">
		<a th:href="@{/}"><img th:src="@{/images/logo.png}" alt="로고"></a>
	</div>
	<div class="wrapper">
		<h2>[ 게시글 보기 ]</h2>
		<input type="hidden" id="boardseq" name="boardseq" th:value="${board.boardseq}">
			<table border="1">
				<tr>
					<th>작성자</th>
					<td th:text="${board.memberid}">Hong</td>
				</tr>
				<tr>
					<th>제목</th>
					<td th:text="${board.title}">글제목</td>
				</tr>
				<tr>
					<th>작성일</th>
					<td th:text="${board.regdate}">작성일</td>
				</tr>
				<tr>
					<th>내용</th>
					<td style="width:300px">
						<pre> [[ ${board.boardtext} ]]</pre>
						<!-- 입력시 엔터를 살리려면 pre태그 사용해야 함 -->
					</td>
				</tr>
				<tr>
					<th>첨부파일</th>
					<td>
						 <!-- th:block 단지, 어떤 특정 영역에 태그를 걸고자 할 때 사용 가능 -->
						<th:block th:if="${board.originalfile != null}" >
							<a th:href="@{/board/download(boardseq=${board.boardseq})}" th:text="${board.originalfile}">첨부파일명</a>
							<a th:href="@{/board/deletefile(boardseq=${board.boardseq})}">
								<img th:src="@{/images/trash.png}" width="15px;">
							</a>
						</th:block>
					</td>
				</tr>
				<tr>
				<!-- 글 삭제와 글 수정은 글쓴 사람과(${board.memberid})
					 로그인한 사람이(${#authentication.name}) 동일한 경우에만 버튼이 나타나도록-->
					<th colspan="2">
						<span>글쓴 사람: [[${board.memberid}]]</span><br>
						<span>로그인한 사람 : [[${#authentication.name}]]</span><br>
						<span th:if="${board.memberid == #authentication.name}">
							<a th:href="@{/board/updateboard(boardseq=${board.boardseq})}">글 수정</a>
							<a th:href="@{/board/deleteboard(boardseq=${board.boardseq})}">글 삭제</a>
						</span>	
						
							<a th:href="@{/board/listboard}">목   록</a>
					</th>
				</tr>
			</table>
			<!-- 댓글 영역 -->
			<div class="reply" style="width:700px; margin : 20px auto;">
				<!-- 댓글 입력 -->
				<div class="replyInput" sec:authorize="isAuthenticated()">
					<span>[[ ${#authentication.name} ]]</span>
					<input type="text" name="replytext" id="replytext" style="width:200px;">
					<input type="button" id="insertReply" value="댓글등록">
					<input type="button" id="updateReply" value="댓글수정">
				</div>
				<!--  댓글 출력 -->
				<div class="replyContent" id="replyContent">
					
				</div>
			</div>
	
	</div> <!-- end .wrapper -->
</body>
</html>