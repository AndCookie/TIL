<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>




<style>




a {
	text-decoration: none;
}
a:hover { font-weight:bolder; color:red;}
</style>
<script>
function pageFormSubmit(currentPage) { 
	let form = document.getElementById("pagingForm");
	let page = document.getElementById("currentPage");
	page.value = currentPage;
	
	form.submit();
}
</script>
</head>
<body>
<div class="wrapper">
	<div class="logo">
		<a th:href="@{/}"><img th:src="@{/images/logo.png}" alt="Logo"></a>
	</div>
	<h2>[ 게시글 ]</h2>
	<p>게시글 개수: [[ ${totalRecordCount} ]]</p>
	
	<!-- 검색창 -->
	<div class="search">
	<form id="pagingForm" th:action="@{/board/listboard}" method="GET">
		<input type="hidden" name="currentPage" id="currentPage" value="">
		<select name="searchItem">
			<option value="memberid"  th:selected="${searchItem == 'memberid'}">글쓴이</option>
			<option value="title"     th:selected="${searchItem == 'title'}">제목</option>
			<option value="boardtext" th:selected="${searchItem == 'boardtext'}">글내용</option>
		</select>
		<input type="text" name="searchWord" th:value="${searchWord}">
		<input type="submit" value="검색">
	</form>
	</div>
	
	<!-- 게시글 목록 -->
	<div class="content">
	<table border="1">
		<tr>
			<th>글번호</th>
			<th style="width:300px;">제목</th>
			<th>글쓴이</th>
			<th>조회수</th>
			<th>작성일</th>
		</tr>
		
		<tr th:each="board, status : ${listboard}">
			<td th:text="${status.index} + ${navi.startRecord}">1</td>
			<td>
			<a th:href="@{/board/readboard(boardseq=${board.boardseq})}"> [[ ${board.title} ]]</a>
				<span th:if="${board.originalfile != null}">
					<img th:src="@{/images/clip.png}" width="15px;">
				</span>
			</td>
			<td th:text="${board.memberid}">Hong</td>
			<td th:text="${board.hitcount}">0</td>
			<td th:text="${board.regdate}">2023-05-30 </td>
		</tr>
	</table>
	</div> <!-- end .content -->
	
	<div class="write" sec:authorize="isAuthenticated()">
		<a th:href="@{/board/writeboard}">글쓰기</a>
	</div>
	
	<!-- 페이지 Navigation -->
	<nav class="pagination justify-content-center" > 
		<!-- 앞 그룹 -->
		<th:block th:if="${(navi.startPageGroup) >= 1}">
			<a th:href="|javascript:pageFormSubmit(${navi.startPageGroup - 1})|" class="navi">&laquo;</a> 
		</th:block>		
		<th:block th:unless="${(navi.startPageGroup) >= 1}">
			<span class="navi">&laquo;</span> 
		</th:block>	
		
		
		<!-- 앞 페이지 -->
		<th:block th:if="${(navi.currentPage) >= 2}">
			<a th:href="|javascript:pageFormSubmit(${navi.currentPage - 1})|" class="navi">&lsaquo;</a> 
		</th:block>		
		<th:block th:unless="${(navi.currentPage) >= 2}">
			<span class="navi">&lsaquo;</span> 
		</th:block>				
	
		<!-- 페이지번호 출력 -->
		<span class="page-item" th:each="count : ${#numbers.sequence(navi.startPageGroup, navi.endPageGroup)}">
			<th:block th:if="${count == navi.currentPage}">
				<b th:text="${count}" style="color:red; font-size:1.2em;"></b>
			</th:block>
			
			<th:block th:unless="${count == navi.currentPage}">
				<a class="page-item" th:href="|javascript:pageFormSubmit(${count})|" th:text="${count}"></a>
			</th:block>
		</span>
		
		<!-- 뒷 페이지 -->
		<th:block th:if="${(navi.currentPage) < navi.totalPageCount}">
			<a th:href="|javascript:pageFormSubmit(${navi.currentPage + 1})|" class="navi">&rsaquo;</a> 
		</th:block>		
		<th:block th:unless="${(navi.currentPage) < navi.totalPageCount}">
			<span class="navi">&rsaquo;</span> 
		</th:block>			
		
		
		
		<!-- 뒷 그룹 -->
		<th:block th:if="${(navi.currentGroup) < (navi.totalGroupCount-1)}">
			<a th:href="|javascript:pageFormSubmit(${navi.endPageGroup + 1 })|" class="navi">&raquo;</a> 
		</th:block>		
		<th:block th:unless="${(navi.currentGroup) < (navi.totalGroupCount-1)}">
			<span class="navi">&raquo;</span>
		</th:block> 		
		
		
		
		
		
		
		
	</nav>
</div> <!-- end .wrapper -->
</body>
</html>




